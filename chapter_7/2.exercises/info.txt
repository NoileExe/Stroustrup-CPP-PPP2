1. Предусмотрите использование символа подчеркивания в именах переменных калькулятора.

2. Реализуйте оператор присваивания =, чтобы можно было изменять значение переменной после ее объявления с помощью инструкции let. Подумайте, почему эта возможность может быть полезной и к каким проблемам она может привести.

3. Реализуйте именованные константы, которые не могут изменять свои значения. Указание: в класс Variable необходимо добавить член, позволяющий различать константы и переменные, и проверять его в функции set_value(). Если хотите дать пользователю возможность объявлять собственные именованные константы (а не ограничиваться предопределенными константами pi и е), то необходимо добавить соответствующее обозначение, например, "const pi = 3.14;".

4. Функции gеt_vаluе(), set_value(), is_declared() и define_name() работают с переменной var_tаblе. Определите класс Symbol_tablе с членом var_tаblе типа vector<Variable> и функциями-членами get(), set(), is_declared() и define(). Перепишите калькулятор с использованием переменной типа Symbol_tablе.

5. Модифицируйте функцию Token_stream::get() так, чтобы, обнаружив символ перехода на следующую строку, она возвращала Token(print). Это повлечет за собой реализацию просмотра пробельных символов и обработку символа '\n'. Для этого можно использовать стандартную библиотечную функцию isspace(ch), возвращающую значение true, если символ ch является пробельным.

6. Каждая программа должна содержать подсказки для пользователя. Пусть при вводе буквы н (в любом регистре) калькулятор выводит на экран инструкцию по эксплуатации.

7. Измените команды q и h на quit и help соответственно.

8. Грамматика в разделе 7.6.4 является неполной (мы уже предостерегали вас о том, что не стоит чрезмерно полагаться на комментарии): в ней не определена последовательность инструкций, например, "4+4;" "5-6;", и в нее не внесены усовершенствования, описанные в разделе 7.8. Исправьте грамматику. Кроме того, добавьте в первый и во все последующие комментарии программы все, что считаете нужным.

9. Предложите три усовершенствования калькулятора (не упомянутых в главе). Реализуйте одно из них.

10. Модифицируйте калькулятор так, чтобы он работал только с целыми числами; предусмотрите ошибки, возникающие при потере точности и переполнении. Указание: воспользуйтесь narrow_cast (раздел 7.5).

11. Переработайте две программы, написанные вами при выполнении упражнений к главам 4 и 5. Приведите в порядок их код в соответствии с правилами, описанными в данной главе. Посмотрите, не нашлись ли в процессе наведения порядка какие-либо ошибки в ваших исходных текстах.
